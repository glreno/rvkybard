<!DOCTYPE html>
<html lang='en'>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/> 
<title>Keypad Test</title>
<style>
* {
-webkit-user-select: none;
-webkit-touch-callout: none;
touch-action: manipulation;
}
button {
touch-action: manipulation;
border: none;
padding: 0px;
margin: 0px;
}
img {
border: none;
padding: 0px;
margin: 0px;
}
</style>
<script type="text/javascript" language="javascript">
let flagsdown = new Set();
let keysdown = new Set();

const send = async () => {
    //console.log(flagsdown);
    //console.log(keysdown);
    let u='../../k?f=';
    flagsdown.forEach((x)=>{u=u+x+','});
    u=u+'&k=';
    keysdown.forEach((x)=>{u=u+x+','});
    //console.log(u);
    response = await fetch(u);
}

function flagDown(key) {
    flagsdown.add(key);
    send();
}
function flagUp(key) {
    flagsdown.delete(key);
    send();
}
function keyDown(key) {
    keysdown.add(key);
    send();
}
function keyUp(key) {
    keysdown.delete(key);
    send();
}
</script>
</head>
<body>
<table cellspacing=0 cellpadding=0 border=0>

<tr>
<!-- TOP ROW    Numlock   /  *  - -->
<td>
<button ontouchstart="keyDown('KP_NUMLOCK')" ontouchend="keyUp('KP_NUMLOCK')" ><img src='keys/KP_NUMLOCK.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('Divide')" ontouchend="keyUp('Divide')" ><img src='keys/KP_DIVIDE.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('Multiply')" ontouchend="keyUp('Multiply')" ><img src='keys/KP_MULTIPLY.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('Minus')" ontouchend="keyUp('Minus')" ><img src='keys/KP_MINUS.svg' /></button>
</td>
</tr>

<tr>
<!-- 7 8 9 + (+ is two rows) -->
<td>
<button ontouchstart="keyDown('KP_7')" ontouchend="keyUp('KP_7')" ><img src='keys/KP_7.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_8')" ontouchend="keyUp('KP_8')" ><img src='keys/KP_8.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_9')" ontouchend="keyUp('KP_9')" ><img src='keys/KP_9.svg' /></button>
</td>
<td rowspan=2>
<button ontouchstart="keyDown('KP_ADD')" ontouchend="keyUp('KP_ADD')" ><img src='keys/KP_PLUS.svg' /></button>
</td>
</tr>

<tr>
<!-- 4 5 6 (+ is two rows) -->
<td>
<button ontouchstart="keyDown('KP_4')" ontouchend="keyUp('KP_4')" ><img src='keys/KP_4.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_5')" ontouchend="keyUp('KP_5')" ><img src='keys/KP_5.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_6')" ontouchend="keyUp('KP_6')" ><img src='keys/KP_6.svg' /></button>
</td>
</tr>

<tr>
<!-- 1 2 3 enter (enter is two rows) -->
<td>
<button ontouchstart="keyDown('KP_1')" ontouchend="keyUp('KP_1')" ><img src='keys/KP_1.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_2')" ontouchend="keyUp('KP_2')" ><img src='keys/KP_2.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_3')" ontouchend="keyUp('KP_3')" ><img src='keys/KP_3.svg' /></button>
</td>
<td rowspan=2>
<button ontouchstart="keyDown('Enter')" ontouchend="keyUp('Enter')" ><img src='keys/KP_ENTER.svg' /></button>
</td>
</tr>

<tr>
<!-- 0 . (0 is two cols, Enter is two rows) -->
<td colspan=2>
<button ontouchstart="keyDown('KP_0')" ontouchend="keyUp('KP_0')" ><img src='keys/KP_0.svg' /></button>
</td>
<td>
<button ontouchstart="keyDown('KP_DOT')" ontouchend="keyUp('KP_DOT')"><img src='keys/KP_DOT.svg' /></button></button>
</td>
</tr>

</table>
</body>
</html>
